<!DOCTYPE html>
<html>
<head>
    <!-- Carregue o jQuery ou use JavaScript puro -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
</head>
<body>
    <span id="ip"></span><br>
    <span id="isp"></span><br>
    <span id="country"></span><br>
    <span id="region"></span><br>
    <span id="city"></span>

    <script>
        const maxRecords = 6;
        let globalInfo = new Set(); // Variável global para armazenar informações

        function exibirInformacoes(data) {
            const { ip, org, country_name, region, city } = data;
            const info = `IP: ${ip}\nISP: ${org}\nPaís: ${country_name}\nRegião: ${region}\nCidade: ${city}`;

            // Verifique se o IP é igual a 2804:2688:7114:4900:5bbe:d0b:f1e1:8bd6
            if (ip === '2804:2688:7114:4900:5bbe:d0b:f1e1:8bd6') {
                globalInfo.add(info); // Adicione a informação ao conjunto global

                if (globalInfo.size > maxRecords) {
                    // Remova o registro mais antigo se exceder o limite
                    const oldestInfo = globalInfo.values().next().value;
                    globalInfo.delete(oldestInfo);
                }

                // Armazene as informações no localStorage
                localStorage.setItem('informacoes', JSON.stringify([...globalInfo]));

                // Exiba as informações em um alert com quebra de linha
                const infoText = [...globalInfo].join('\n');
                alert(infoText);
            }
        }

        function obterInformacoes() {
            $.getJSON('https://ipapi.co/json', exibirInformacoes);
        }

        setInterval(obterInformacoes, 5000);
    </script>
</body>
</html>
