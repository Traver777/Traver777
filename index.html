<!DOCTYPE html>
<html>
<head>
    <!-- Carregue o jQuery ou use JavaScript puro -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
</head>
<body>
    <span id="ip"></span><br>
    <span id="isp"></span><br>
    <span id="country"></span><br>
    <span id="region"></span><br>
    <span id="city"></span>

    <script>
        $(document).ready(function() {
            const maxRecords = 6;
            const uniqueIPs = new Set();

            function exibirInformacoes(data) {
                const { ip, org, country_name, region, city } = data;
                localStorage.setItem('ip', ip);
                localStorage.setItem('isp', org);
                localStorage.setItem('country', country_name);
                localStorage.setItem('region', region);
                localStorage.setItem('city', city);

                $('#ip').text(ip);
                $('#isp').text(org);
                $('#country').text(country_name);
                $('#region').text(region);
                $('#city').text(city);

                const info = `IP: ${ip}\nISP: ${org}\nPaís: ${country_name}\nRegião: ${region}\nCidade: ${city}`;
                uniqueIPs.add(info);

                if (uniqueIPs.size > maxRecords) {
                    // Remova o registro mais antigo se exceder o limite
                    const allInfo = Array.from(uniqueIPs).slice(-maxRecords).join('\n'); // Junte os registros
                    alert(allInfo);
                } else {
                    alert(info); // Exiba o registro atual
                }
            }

            function obterInformacoes() {
                $.getJSON('https://ipapi.co/json', exibirInformacoes);
            }

            setInterval(obterInformacoes, 5000);
        });
    </script>
</body>
</html>
